name: Yaml Lint Check
on: 
  pull_request:
  push:
    branches:
     - main

jobs:
  lintAllTheThings:
    name: Yaml-Linting
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - id: yaml-lint
      uses: ibiqlik/action-yamllint@v3
      with:
        config_data: |
          extends: default
          rules:
            new-line-at-end-of-file:
              level: warning
            trailing-spaces:
              level: warning

    - name: uploading-logs
      uses: actions/upload-artifact@v2
      run: echo ${{ steps.yaml-lint.outputs.logfile }}
      if: always()
      with:
        name: yamllint-logfile
        path: ${{ steps.yaml-lint.outputs.logfile }}
